$(window).on("load",function(){$(".preloader").addClass("hide"),$("body").addClass("body-show"),localStorage.clear()});var swiperHTP=new Swiper(".htp-slider.swiper-container",{slidesPerView:1,spaceBetween:0,pagination:{el:".htp-slider .swiper-pagination"}});function countDownTimer(){var a=document.querySelector(".countdown-number"),e=3;a.textContent=e;var t=setInterval(function(){e=--e<=0?0:e,a.textContent=e},1e3);setTimeout(function(){clearInterval(t)},3e3)}function waktuBatasGame(a){var e=document.querySelector("#waktuBatas"),t=a;e.textContent=t;var o=setInterval(function(){t=--t<=0?0:t,e.textContent=t},1e3);setTimeout(function(){clearInterval(o)},1e3*a)}var getUrlParameter=function(a){var e,t,o=window.location.search.substring(1).split("&");for(t=0;t<o.length;t++)if((e=o[t].split("="))[0]===a)return void 0===typeof e[1]||decodeURIComponent(e[1]);return!1},stage1=getUrlParameter("stage1"),stage2=getUrlParameter("stage2"),stage3=getUrlParameter("stage3"),stage4=getUrlParameter("stage4"),stage5=getUrlParameter("stage5"),stage6=getUrlParameter("stage6");function playNow(){var a=localStorage.getItem("waktuMain"),e=1e3*a;$("#modalStageHowToPlay").addClass("hide"),$("#modalCountDown").removeClass("hide"),$("#modalGameWaktuSelesai").addClass("hide"),$(".gameplay").addClass("show"),countDownTimer(),setTimeout(function(){$("#modalCountDown").addClass("hide"),$(".backdrop").addClass("hide"),waktuBatasGame(a),setTimeout(function(){$("#modalGameWaktuSelesai").removeClass("hide"),$(".backdrop").removeClass("hide"),$("#modalGameWaktuSelesai .stage .stage__text h5").html("STAGE "+localStorage.getItem("stageId")),$("#modalGameWaktuSelesai .stage .stage__text h4").html(localStorage.getItem("stageName"))},e)},3e3)}function exitGame(){localStorage.clear(),$(".gameplay").removeClass("show"),$("#modalGameWaktuSelesai").addClass("hide"),$(".backdrop").addClass("hide")}function nextSlideHTP(a){a<=2?swiperHTP.slideTo(a):playNow()}$(".home .drag .ground .stage").click(function(){var a=$(this).data("stage").id,e=$(this).data("stage").name,t=$(this).data("stage").waktuMain;"lock"==getUrlParameter("stage"+a)?($("#modalStageLock").removeClass("hide"),$(".backdrop").removeClass("hide"),$("#modalStageLock .stage .stage__text h5").html("STAGE "+a),$("#modalStageLock .stage .stage__text h4").html(e),$("#modalStageLock .modal-title").html(e)):($(".gameplay").addClass("show"),$("#modalStageHowToPlay .stage .stage__text h5").html("STAGE "+a),$("#modalStageHowToPlay .stage .stage__text h4").html(e),$("#modalStageHowToPlay").removeClass("hide"),$(".backdrop").removeClass("hide"),swiperHTP.slideTo(0),localStorage.setItem("stageId",a),localStorage.setItem("stageName",e),localStorage.setItem("waktuMain",t))}),$(".modalClose").click(function(){$(".modal").addClass("hide"),$(".backdrop").addClass("hide")});var myBlock=document.getElementById("dragGround"),mc=new Hammer(myBlock);mc.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:0})),mc.on("pan",handleDrag);var maxYTop=0,maxYBottom=-922,maxXLeft=0,maxXRight=-1390,lastPosX=0,lastPosY=0,isDragging=!1;function handleDrag(a){var e=myBlock;isDragging||(isDragging=!0,lastPosX=e.offsetLeft,lastPosY=e.offsetTop);var t=0,o=a.deltaY+lastPosY>maxYTop;a.deltaY;t=o?maxYTop:a.deltaY+lastPosY,e.style.top=t+"px";var r=0,s=a.deltaX+lastPosX>maxXLeft;a.deltaX;r=s?maxXLeft:a.deltaX+lastPosX,e.style.left=r+"px",a.isFinal&&(isDragging=!1)}var dragStage1=document.getElementById("dragStage1"),dragStage1MC=new Hammer(dragStage1);dragStage1MC.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:0})),dragStage1MC.on("pan",handleDrag);maxYTop=0,maxYBottom=-922,maxXLeft=0,maxXRight=-1390,lastPosX=0,lastPosY=0,isDragging=!1;function handleDrag(a){var e=dragStage1;isDragging||(isDragging=!0,lastPosX=e.offsetLeft,lastPosY=e.offsetTop);var t=0,o=a.deltaY+lastPosY>maxYTop;a.deltaY;t=o?maxYTop:a.deltaY+lastPosY,e.style.top=t+"px";var r=0,s=a.deltaX+lastPosX>maxXLeft;a.deltaX;r=s?maxXLeft:a.deltaX+lastPosX,e.style.left=r+"px",a.isFinal&&(isDragging=!1)}let sourceContainerId="",dragSources=document.querySelectorAll('[draggable="true"]');function dragStart(a){this.classList.add("dragging"),a.dataTransfer.setData("text/plain",a.target.id),sourceContainerId=this.parentElement.id}function dragEnd(a){this.classList.remove("dragging")}dragSources.forEach(a=>{a.addEventListener("dragstart",dragStart),a.addEventListener("dragend",dragEnd)});let dropTargets=document.querySelectorAll('[data-role="drag-drop-container"]');function dropped(a){if(this.id!==sourceContainerId){cancelDefault(a);let e=a.dataTransfer.getData("text/plain");a.target.appendChild(document.querySelector("#"+e)),this.classList.remove("hover")}}function dragOver(a){cancelDefault(a),this.classList.add("hover")}function dragLeave(a){this.classList.remove("hover")}function cancelDefault(a){return a.preventDefault(),a.stopPropagation(),!1}dropTargets.forEach(a=>{a.addEventListener("drop",dropped),a.addEventListener("dragenter",cancelDefault),a.addEventListener("dragover",dragOver),a.addEventListener("dragleave",dragLeave)});